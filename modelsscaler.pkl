 # ==========================================================
# üöó Fuel Efficiency Project - Scaler Generator Script
# Creates and saves only the StandardScaler (scaler.pkl)
# ==========================================================

import pandas as pd
import numpy as np
import os
from sklearn.preprocessing import LabelEncoder, StandardScaler
import joblib

# ------------------------------------------
# 1Ô∏è‚É£ Load Dataset
# ------------------------------------------
data_path = r"C:\Users\Admin\Downloads\fuel_efficiency_dataset.csv"  # <-- update if needed
data = pd.read_csv(data_path).dropna()

# ------------------------------------------
# 2Ô∏è‚É£ Encode Categorical Columns
# ------------------------------------------
for col in ['fuel_type', 'transmission']:
    if col in data.columns:
        le = LabelEncoder()
        data[col] = le.fit_transform(data[col])

# ------------------------------------------
# 3Ô∏è‚É£ Separate Features and Target
# ------------------------------------------
X = data.drop(columns=['mpg'])  # only input features
y = data['mpg']                 # target (not scaled)

# ------------------------------------------
# 4Ô∏è‚É£ Create and Fit Scaler
# ------------------------------------------
scaler = StandardScaler()
scaler.fit(X)

# ------------------------------------------
# 5Ô∏è‚É£ Save Scaler as scaler.pkl
# ------------------------------------------
os.makedirs("models", exist_ok=True)
joblib.dump(scaler, "models/scaler.pkl")

print("‚úÖ Scaler created and saved successfully as 'models/scaler.pkl'")
print(f"üìä Features scaled: {list(X.columns)}")
